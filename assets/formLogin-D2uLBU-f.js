var E=Object.defineProperty;var L=(a,s,n)=>s in a?E(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n;var g=(a,s,n)=>L(a,typeof s!="symbol"?s+"":s,n);import{d as C,r as F,c as N,o as i,a as d,b as u,t as p,e as c,f as b,w as v,F as V,g as h,u as r,h as _,i as f,_ as q,j as I}from"./index-CW0V_n7M.js";import{E as S,v as y,u as x,_ as T}from"./form.types-CFhyr0fJ.js";class D{constructor(s={}){g(this,"_password");g(this,"_email");s=s??{},this._password=s.password||null,this._email=s.email||null}get password(){return this._password}set password(s){this._password=s}get email(){return this._email}set email(s){this._email=s}reset(){this._password=null,this._email=null}}const M={class:"form-login m-form"},U={class:"form-login__form-default m-form__default"},j={key:0,class:"m-form__default-title"},A={class:"m-form__default-body"},G={class:"m-form__form-footer"},H={key:0,class:"m-form__error"},O={key:1,class:"m-form__success"},P=C({__name:"formLogin",props:{defaultTitle:{default:S.DEFAULT_TITLE_LOGIN},error:{type:Boolean},success:{type:Boolean},loading:{type:Boolean,default:!1}},emits:["submit"],setup(a,{emit:s}){const n=s,l=a,m=F(new D),k=N(()=>({email:{required:y.required(),email:y.email},password:{required:y.required()}})),o=x(k,m),B=()=>{o.value.$touch(),!o.value.$invalid&&n("submit",m.value)};return($,e)=>(i(),d("div",M,[u("form",{class:"form-login__form",onSubmit:I(B,["prevent"]),autocomplete:"off"},[u("div",U,[l.defaultTitle?(i(),d("div",j,p(l.defaultTitle),1)):c("",!0),u("div",A,[b(T,{modelValue:m.value.email,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value.email=t),placeholder:"Введите значение",label:"Email",error:r(o).email.$error,valid:!r(o).email.$invalid,onInput:e[1]||(e[1]=t=>r(o).email.$touch()),onChange:e[2]||(e[2]=t=>r(o).email.$touch()),onBlur:e[3]||(e[3]=t=>!r(o).email.$model&&r(o).email.$touch())},{error:v(()=>[(i(!0),d(V,null,h(r(o).email.$errors,(t,w)=>(i(),d("span",{key:`error-${w}`},p(t.$message),1))),128))]),_:1},8,["modelValue","error","valid"]),b(T,{modelValue:m.value.password,"onUpdate:modelValue":e[4]||(e[4]=t=>m.value.password=t),label:"Пароль",name:"password",type:"password",placeholder:"Введите пароль",error:r(o).password.$error,valid:!r(o).password.$invalid,onInput:e[5]||(e[5]=t=>r(o).password.$touch()),onChange:e[6]||(e[6]=t=>r(o).password.$touch()),onBlur:e[7]||(e[7]=t=>!r(o).password.$model&&r(o).password.$touch())},{error:v(()=>[(i(!0),d(V,null,h(r(o).password.$errors,(t,w)=>(i(),d("span",{key:`error-${w}`},p(t.$message),1))),128))]),_:1},8,["modelValue","error","valid"]),u("div",G,[_($.$slots,"footerText",{},()=>[e[8]||(e[8]=u("div",{class:"m-form__footer-text"},[f(" У вас нет аккаунта? "),u("a",{href:"#",class:"link"},"Зарегистрируйтесь")],-1))]),b(q,{tag:"button",type:"submit",disabled:r(o).$invalid||l.loading,loading:l.loading},{loading:v(()=>e[9]||(e[9]=[f(" В процессе ")])),default:v(()=>[_($.$slots,"buttonText",{},()=>[e[10]||(e[10]=f("Войти"))])]),_:3},8,["disabled","loading"])])])]),l.error?(i(),d("div",H,[_($.$slots,"error",{},()=>[f(p(l.error),1)])])):c("",!0),l.success?(i(),d("div",O,[_($.$slots,"success",{},()=>[f(p(l.success),1)])])):c("",!0)],32)]))}});export{P as default};
